# :shopping: :chart_with_upwards_trend: Analysing Customer Shopping Behaivour for Ecommerce Industry

![AWS](https://img.shields.io/badge/AWS-%23FF9900.svg?style=for-the-badge&logo=amazon-aws&logoColor=white) ![Postgres](https://img.shields.io/badge/postgres-%23316192.svg?style=for-the-badge&logo=postgresql&logoColor=white)
![Kaggle](https://img.shields.io/badge/Kaggle-035a7d?style=for-the-badge&logo=kaggle&logoColor=white) ![Power Bi](https://img.shields.io/badge/power_bi-F2C811?style=for-the-badge&logo=powerbi&logoColor=black) 
![Apache](https://img.shields.io/badge/apache-%23D42029.svg?style=for-the-badge&logo=apache&logoColor=white) 



## Introduction 
Understanding __Customer Shopping Patterns__ is important for __Ecommerce Businesses__ to __cross-sell__ and __upsell__ products because it allows them to tailor their marketing and sales efforts to the specific needs and preferences of their customers.

For example, by analyzing customer shopping patterns, an ecommerce business can identify which products are frequently purchased together and can then use this information to suggest related products to customers during the checkout process, this is called cross-selling. This can increase the average order value and boost sales for the business.

Another way that customer shopping patterns can be used to increase sales is through upselling. By identifying which products customers frequently purchase, an ecommerce business can suggest higher-priced or premium versions of those products to customers, increasing the revenue per transaction.

Additionally, by understanding customer shopping patterns, ecommerce businesses can also develop targeted marketing campaigns to reach customers who are most likely to be interested in specific products or product categories. This can help to increase customer engagement and improve the overall customer experience.

In conclusion, customer shopping patterns are important for ecommerce businesses as it helps them to understand their customer's preferences, behaviors and purchase history, which in turn can be used to drive sales through cross-selling and upselling, as well as improve customer engagement and experience through targeted marketing.





## Challenges
__Ecommerce__ data can be very large and complex, making it difficult to analyze and extract insights from it. The volume of data generated by ecommerce businesses can be in the range of terabytes or even petabytes, depending on the size and scale of the business.

__AWS (Amazon Web Services)__ offers a number of services that can help ecommerce businesses to manage and analyze large amounts of data more efficiently. These services include:

__S3 (Simple Storage Service)__ : allows businesses to store and retrieve large amounts of unstructured data, such as customer purchase history, product information, and website logs, in a cost-effective and scalable way.

__EC2 (Elastic Compute Cloud)__: enables businesses to spin up virtual machines with the necessary computing power and storage to process large data sets.

__EMR (Elastic MapReduce)__ : is a service that makes it easy to process big data using Hadoop and Spark. It allows businesses to quickly and easily spin up clusters of virtual machines to process large amounts of data.

__Glue__ : is an ETL (extract, transform, load) service that can be used to extract data from various sources, transform it into a format that can be analyzed, and load it into a data warehouse for further analysis.

__Redshift__ : is a data warehouse service that allows businesses to store and analyze large amounts of structured data.

__QuickSight__ : is a service that can be used to create visualizations and perform ad-hoc analysis on large amounts of data.

By using these services, ecommerce businesses can store, process, and analyze large amounts of data more efficiently, which can help them to gain insights that can be used to improve their operations and increase sales.

For example, an ecommerce business can use S3 to store customer purchase history and website logs, EMR to process the data, and Redshift and QuickSight to perform analysis and create visualizations. This can help the business to identify patterns and trends in customer behavior, such as which products are frequently purchased together, which can be used to inform cross-selling and upselling efforts.

In conclusion, AWS provides a range of services that are efficient for managing big data and can help ecommerce businesses to extract valuable insights from large and complex data sets. These services can be used together to store, process, and analyze data, allowing ecommerce businesses to gain insights that can help them to improve their operations and increase sales.




## Data Description
The dataset for ecommerce industry was taken from [Kaggle.](https://www.kaggle.com/datasets/mkechinov/ecommerce-behavior-data-from-multi-category-store)
The dataset consisted of the shopping activity of around 285 million users from an e-commerce 
website for over a period of 7 months i.e., from October 2019 to April 2020. 
The total size of data available is 30 GB, but we have used October and November 
data (15 GB) for our analysis. The various attributes like product ID, product category, 
product subcategory, price, user session ID, brand, event_type, etc. were included in the
dataset describing the user shopping activity. Details about data and project is available in this [document.](https://github.com/iqrabismii/Big-Data-Projects-/blob/main/Analyzing-Customer-Shopping-Behavior-from-a-large-Multicategory-Online-Store-/DataArtists_NIST_Form.pdf)


## Project Methodology 

Figure below shows the __ELT__ architecture i.e. data was first loaded in __AWS S3__ using AWS cli ( using command as aws s3 cp source path s3://my-bucket/). After 
loading the data in S3, __AWS Glue__ was used to perform data wrangling such as changing the columns to relevant datatypes etc. For this __crawler__ was defined
in order to create the metadata for the data in __data catalog__. After this relevant tranformation was done using __Pyspark__ and then transformed data was again 
loaded back to S3. __Athena__ to query the data and to look at the schema of our data. 
The __CloudWatch__ was used for monitoring the performance of query and tasks and alarm us in case of any troubleshoot.
Also, data analysis was done by creating __visualisation__ in __Tableau__. This was done by connecting Athena to Tableau (i.e. mentioning the server, ports etc.)
As the data was huge so random sample of 1M records was taken to create relevant visualisations and published dashboard in Tableau. 
Lastly, a __static website__ was published by loading an embed for dashboard in S3. Details about this project is available in this [document.](https://github.com/iqrabismii/Big-Data-Projects-/blob/main/Analyzing-Customer-Shopping-Behavior-from-a-large-Multicategory-Online-Store-/ProjectReport.docx)

![Screenshot 2023-01-20 at 1 50 56 AM](https://user-images.githubusercontent.com/108056063/213666181-74164406-c3b9-477e-94eb-39be58b56d8a.png)

## Tools Used

For this project, following __AWS__ Services were leveraged: 
* [AWS S3](https://aws.amazon.com/s3/)
* [AWS GLUE](https://aws.amazon.com/glue/)
* [ATHENA](https://aws.amazon.com/athena/)
* [CLOUDWATCH](https://aws.amazon.com/cloudwatch/)



## Data Transformation using Pyspark Script

Pyspark was used to clean and transform the data. This was done using __AWS Glue__. Exploratory Data Analysis and Extract Load Transform (ELT) was performed on the dataset which included removing duplicate data, handling missing values, changing the datatype to correct format, etc. After a thorough analysis, following cleaning and transformation was done on the dataset:
* All the columns were modified with appropriate datatypes.
* The column event_time was originally of the string datatype and consisted of ‘UTC’ along with the timestamp. Thus,the ‘UTC’ was removed and event_time was changed to timestamp datatype.
* The column category_code was splitted into three columns as it consisted of the product category, their subcategory and special category in one column itself. We splitted them with columns namely category_1, category_2 and category_3. The delimiter ‘.’ was used to split the category_code column.
More details can be found in this [Pyspark Script.](https://github.com/iqrabismii/Big-Data-Projects-/blob/main/Analyzing-Customer-Shopping-Behavior-from-a-large-Multicategory-Online-Store-/CleaningAndTransforming.py)

## Connecting AWS to Tableau

Tableau desktop was used to make connections with Athena for creating dashboards. Tableau Desktop was connected to AWS Athena by inserting the Server, Port, and the S3 Staging Directory (The S3 URL where the queried data is stored) along with the Access Key ID of our user which can be seen in Figure below


![Screenshot 2023-01-20 at 2 17 16 AM](https://user-images.githubusercontent.com/108056063/213671434-4bb47cdc-eb69-4fa9-a051-512db99d25a6.png)



## Insights
Once, the connection is successful, a subset of data was extracted (around 1 million records) as shown below.



![Screenshot 2023-01-20 at 11 12 33 AM](https://user-images.githubusercontent.com/108056063/213785801-4c7375ea-ff21-4b79-8de5-19e583a05b46.png)

From the visualisation, following patterns were observed: 
* total sales increases after first week of each month. For the month of October, the highest sales were observed on October 13th, 2019, which was Sunday. Similarly, for the month of November, the highest sales recorded (which was the overall highest sales) was on November 17th which was also third Sunday.  Overall sales for November were higher. One of the reasons could be the approach of Thanksgiving which falls on the last week of November
* bubble chart shows the most sold products on the e- commerce website. Electronics tops the rank with around 8248 items sold. The second top sold category is  appliances (1538 items), computers.
* from electronics category, smartphones are the most purchased items by customers which is followed by audio and video related items. It was observed that camera is the least purchased product for this e-commerce website.
* Samsung is the most popular brand  followed by Apple and Xiaomi. 
* The donut chart shows the percentage of people viewing the products on e-commerce website is the largest (94.94%). The percentage of people adding these items into their cart is around 3.58 % whereas only 1.49% of the total people will purchase the products.
* Acitivity shows an increasing trend till 8 am and then a slight dip is observed at around 12 pm. 

Once the dashboard is ready in Tableau Public and  the embed code was copied as shown below and uploaded to S3 bucket for hosting it as a static website for public access.

![Screenshot 2023-01-20 at 11 19 35 AM](https://user-images.githubusercontent.com/108056063/213787002-228ba72a-1b13-4dc6-9453-6e6434fea4ce.png)

Figure below shows the dashboard.


![Screenshot 2023-01-20 at 11 36 16 AM](https://user-images.githubusercontent.com/108056063/213790500-d58f4cd9-907c-49a0-a7a7-58d801d1b0e1.png)















